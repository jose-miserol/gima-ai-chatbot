<mxfile host="Electron" type="device">
  <diagram id="Nivel1" name="Nivel 1 (Subsistemas Principales)">
    <mxGraphModel dx="1200" dy="800" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- Entidades Externas alineadas en y=40 -->
        <!-- E1: Técnico -->
        <mxCell id="E1" value="TÉCNICO" style="shape=rect;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2;fontStyle=1;align=center;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="40" y="40" width="160" height="80" as="geometry" />
        </mxCell>
        
        <!-- E3: Proveedor IA -->
        <mxCell id="E3" value="PROVEEDOR DE IA" style="shape=rect;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2;fontStyle=1;align=center;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="380" y="40" width="160" height="80" as="geometry" />
        </mxCell>

        <!-- E2: Backend GIMA -->
        <mxCell id="E2" value="SISTEMA BACKEND&#xa;GIMA" style="shape=rect;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2;fontStyle=1;align=center;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="720" y="40" width="160" height="80" as="geometry" />
        </mxCell>

        <!-- Procesos del Nivel 1 -->
        <!-- P1: Gestionar Interacción -->
        <mxCell id="P1" value="&lt;b&gt;1&lt;/b&gt;&lt;hr style=&quot;border-color: #000; margin-top: 5px; margin-bottom: 5px;&quot;&gt;GESTIONAR&lt;br&gt;INTERACCIÓN&lt;br&gt;DE USUARIO" style="rounded=1;whiteSpace=wrap;html=1;arcSize=20;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2;fontStyle=1;align=center;verticalAlign=top;spacingTop=6;" vertex="1" parent="1">
          <mxGeometry x="40" y="200" width="160" height="100" as="geometry" />
        </mxCell>

        <!-- P2: Procesar Multimedia -->
        <mxCell id="P2" value="&lt;b&gt;2&lt;/b&gt;&lt;hr style=&quot;border-color: #000; margin-top: 5px; margin-bottom: 5px;&quot;&gt;PROCESAR&lt;br&gt;CONTENIDO&lt;br&gt;MULTIMEDIA" style="rounded=1;whiteSpace=wrap;html=1;arcSize=20;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2;fontStyle=1;align=center;verticalAlign=top;spacingTop=6;" vertex="1" parent="1">
          <mxGeometry x="240" y="140" width="160" height="100" as="geometry" />
        </mxCell>

        <!-- P3: Generar Respuesta Diferida -->
        <mxCell id="P3" value="&lt;b&gt;3&lt;/b&gt;&lt;hr style=&quot;border-color: #000; margin-top: 5px; margin-bottom: 5px;&quot;&gt;GENERAR&lt;br&gt;RESPUESTA&lt;br&gt;INTELIGENTE" style="rounded=1;whiteSpace=wrap;html=1;arcSize=20;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2;fontStyle=1;align=center;verticalAlign=top;spacingTop=6;" vertex="1" parent="1">
          <mxGeometry x="380" y="300" width="160" height="100" as="geometry" />
        </mxCell>

        <!-- P4: Ejecutar Herramientas -->
        <mxCell id="P4" value="&lt;b&gt;4&lt;/b&gt;&lt;hr style=&quot;border-color: #000; margin-top: 5px; margin-bottom: 5px;&quot;&gt;EJECUTAR&lt;br&gt;HERRAMIENTAS&lt;br&gt;DE NEGOCIO" style="rounded=1;whiteSpace=wrap;html=1;arcSize=20;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2;fontStyle=1;align=center;verticalAlign=top;spacingTop=6;" vertex="1" parent="1">
          <mxGeometry x="720" y="300" width="160" height="100" as="geometry" />
        </mxCell>

        <!-- Almacenes de Datos -->
        <mxCell id="D1" value="D1 HISTORIAL DE&#xa;CONVERSACIÓN" style="shape=mxgraph.dfd.dataStoreID;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2;fontStyle=1;align=center;verticalAlign=middle;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="40" y="420" width="160" height="60" as="geometry" />
        </mxCell>

        <!-- ======================= FLUJOS ======================= -->
        
        <!-- E1 a P1 y viceversa -->
        <mxCell id="F1_E1_P1" value="Instrucción&#xa;o Consulta" style="endArrow=classic;html=1;exitX=0.2;exitY=1;entryX=0.2;entryY=0;edgeStyle=orthogonalEdgeStyle;strokeColor=#000000;strokeWidth=1;" edge="1" parent="1" source="E1" target="P1">
          <mxGeometry x="0.2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>

        <mxCell id="F1_P1_E1_1" value="Respuesta Generada" style="endArrow=classic;html=1;exitX=0.4;exitY=0;entryX=0.4;entryY=1;edgeStyle=orthogonalEdgeStyle;strokeColor=#000000;strokeWidth=1;" edge="1" parent="1" source="P1" target="E1">
          <mxGeometry x="-0.2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>

        <mxCell id="F1_P1_E1_2" value="Opciones&#xa;Visuales" style="endArrow=classic;html=1;exitX=0.6;exitY=0;entryX=0.6;entryY=1;edgeStyle=orthogonalEdgeStyle;strokeColor=#000000;strokeWidth=1;" edge="1" parent="1" source="P1" target="E1">
          <mxGeometry x="0.3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>

        <!-- E1 a P2 -->
        <mxCell id="F2_E1_P2" value="Archivo&#xa;Multimedia" style="endArrow=classic;html=1;exitX=0.8;exitY=1;entryX=0.2;entryY=0;edgeStyle=orthogonalEdgeStyle;strokeColor=#000000;strokeWidth=1;" edge="1" parent="1" source="E1" target="P2">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="168" y="130" />
              <mxPoint x="272" y="130" />
            </Array>
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>

        <!-- P1 y D1 -->
        <mxCell id="F3_P1_D1" value="Nuevo Mensaje" style="endArrow=classic;html=1;exitX=0.3;exitY=1;entryX=0.3;entryY=0;edgeStyle=orthogonalEdgeStyle;strokeColor=#000000;strokeWidth=1;" edge="1" parent="1" source="P1" target="D1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="F3_D1_P1" value="Contexto&#xa;de Sesión" style="endArrow=classic;html=1;exitX=0.7;exitY=0;entryX=0.7;entryY=1;edgeStyle=orthogonalEdgeStyle;strokeColor=#000000;strokeWidth=1;" edge="1" parent="1" source="D1" target="P1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- D1 y P3 -->
        <mxCell id="F4_D1_P3" value="Historial Relevante" style="endArrow=classic;html=1;exitX=1;exitY=0.5;entryX=0;entryY=0.8;edgeStyle=orthogonalEdgeStyle;strokeColor=#000000;strokeWidth=1;" edge="1" parent="1" source="D1" target="P3">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="240" y="450" />
              <mxPoint x="240" y="380" />
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- P2 y P1 -->
        <mxCell id="F5_P2_P1" value="Transcripción o&#xa;Extracción" style="endArrow=classic;html=1;exitX=0;exitY=0.8;entryX=1;entryY=0.2;edgeStyle=orthogonalEdgeStyle;strokeColor=#000000;strokeWidth=1;" edge="1" parent="1" source="P2" target="P1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- P2 y E3 -->
        <mxCell id="F6_P2_E3" value="Archivo&#xa;para Análisis" style="endArrow=classic;html=1;exitX=0.8;exitY=0;entryX=0;entryY=0.6;edgeStyle=orthogonalEdgeStyle;strokeColor=#000000;strokeWidth=1;" edge="1" parent="1" source="P2" target="E3">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="368" y="88" />
            </Array>
          </mxGeometry>
        </mxCell>

        <mxCell id="F6_E3_P2" value="Análisis&#xa;Multimedia" style="endArrow=classic;html=1;exitX=0.1;exitY=1;entryX=0.6;entryY=0;edgeStyle=orthogonalEdgeStyle;strokeColor=#000000;strokeWidth=1;" edge="1" parent="1" source="E3" target="P2">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="396" y="130" />
              <mxPoint x="336" y="130" />
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- P1 y P3 -->
        <mxCell id="F7_P1_P3" value="Intención del Usuario" style="endArrow=classic;html=1;exitX=1;exitY=0.6;entryX=0;entryY=0.2;edgeStyle=orthogonalEdgeStyle;strokeColor=#000000;strokeWidth=1;" edge="1" parent="1" source="P1" target="P3">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="280" y="260" />
              <mxPoint x="280" y="320" />
            </Array>
          </mxGeometry>
        </mxCell>

        <mxCell id="F7_P3_P1" value="Respuesta Formateada" style="endArrow=classic;html=1;exitX=0;exitY=0.4;entryX=1;entryY=0.8;edgeStyle=orthogonalEdgeStyle;strokeColor=#000000;strokeWidth=1;" edge="1" parent="1" source="P3" target="P1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="260" y="340" />
              <mxPoint x="260" y="280" />
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- P3 y E3 -->
        <mxCell id="F8_P3_E3" value="Prompt y&#xa;Contexto" style="endArrow=classic;html=1;exitX=0.4;exitY=0;entryX=0.4;entryY=1;edgeStyle=orthogonalEdgeStyle;strokeColor=#000000;strokeWidth=1;" edge="1" parent="1" source="P3" target="E3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="F8_E3_P3" value="Contenido&#xa;Generado" style="endArrow=classic;html=1;exitX=0.6;exitY=1;entryX=0.6;entryY=0;edgeStyle=orthogonalEdgeStyle;strokeColor=#000000;strokeWidth=1;" edge="1" parent="1" source="E3" target="P3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- P3 y P4 -->
        <mxCell id="F9_P3_P4" value="Solicitud de Operación" style="endArrow=classic;html=1;exitX=1;exitY=0.3;entryX=0;entryY=0.3;edgeStyle=orthogonalEdgeStyle;strokeColor=#000000;strokeWidth=1;" edge="1" parent="1" source="P3" target="P4">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="F9_P4_P3" value="Resultado de Operación" style="endArrow=classic;html=1;exitX=0;exitY=0.7;entryX=1;entryY=0.7;edgeStyle=orthogonalEdgeStyle;strokeColor=#000000;strokeWidth=1;" edge="1" parent="1" source="P4" target="P3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- P4 y E2 -->
        <mxCell id="F10_P4_E2" value="Solicitud de Transacción&#xa;o Consulta" style="endArrow=classic;html=1;exitX=0.4;exitY=0;entryX=0.4;entryY=1;edgeStyle=orthogonalEdgeStyle;strokeColor=#000000;strokeWidth=1;" edge="1" parent="1" source="P4" target="E2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="F10_E2_P4" value="Datos de Inventario y OT" style="endArrow=classic;html=1;exitX=0.6;exitY=1;entryX=0.6;entryY=0;edgeStyle=orthogonalEdgeStyle;strokeColor=#000000;strokeWidth=1;" edge="1" parent="1" source="E2" target="P4">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
